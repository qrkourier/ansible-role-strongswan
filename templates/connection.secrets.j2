# {{ ansible_managed }}

{% set authby = conn.conn.authby if conn.conn.authby is defined else strongswan_conn_default.authby %}
{% set local = conn.left.address if conn.left is defined and conn.left.address is defined else strongswan_conn_default.left.address %}
{% set remote = conn.right.address if conn.right is defined and conn.right.address is defined else strongswan_conn_default.right.address %}
# local remote : type secret
{% if authby == 'psk' or authby == 'secret' %}
{{ local }} {{ remote }} : PSK "{{ conn.secret }}"
{% endif %}